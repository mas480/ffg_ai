import base64
import json
import re
from PIL import Image
from typing import List, Dict
import torch
import logging
import os
from openai import OpenAI
from transformers import CLIPProcessor, CLIPModel
from dotenv import load_dotenv

# === Ğ›ĞĞ“Ğ˜Ğ ĞĞ’ĞĞĞ˜Ğ• ===
logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)

# === Ğ—ĞĞ“Ğ Ğ£Ğ—ĞšĞ .env ===
load_dotenv()
api_key = os.getenv("OPENAI_API_KEY")

if not api_key:
    logger.error("âŒ API-ĞºĞ»ÑÑ‡ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½ Ğ² .env (Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ğ°Ñ OPENAI_API_KEY)")
    exit(1)

# === Ğ˜ĞĞ˜Ğ¦Ğ˜ĞĞ›Ğ˜Ğ—ĞĞ¦Ğ˜Ğ¯ ĞšĞ›Ğ˜Ğ•ĞĞ¢Ğ ===
client = OpenAI(api_key=api_key)

clip_model = CLIPModel.from_pretrained("openai/clip-vit-base-patch32")
clip_processor = CLIPProcessor.from_pretrained("openai/clip-vit-base-patch32")

# === Ğ¢Ğ•ĞšĞ¡Ğ¢ĞĞ’Ğ«Ğ• ĞŸĞ ĞĞœĞŸĞ¢Ğ« (Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½Ğ¸ ÑĞ²Ğ¾Ğ¸ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ñ‹) ===

PROFILE_ANALYSIS_PROMPT = (
                    "Ğ¢Ñ‹ â€” Ğ»ÑƒÑ‡ÑˆĞ¸Ğ¹ AI-Ğ¼ĞµĞ½Ñ‚Ğ¾Ñ€ Ğ¿Ğ¾ Ğ´ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³Ñƒ, ÑĞºÑĞ¿ĞµÑ€Ñ‚ Ğ² ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğ¸ Ğ¶Ğ¸Ğ²Ñ‹Ñ… Ğ¸ Ğ¸ÑĞºÑ€ĞµĞ½Ğ½Ğ¸Ñ… Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ²Ñ‹Ñ… Ğ°Ğ½ĞºĞµÑ‚, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹ Ğ¿Ğ¾Ğ¼Ğ¾Ğ³Ğ°ĞµÑ‚ Ğ»ÑĞ´ÑĞ¼ Ğ²Ñ‹Ğ³Ğ¾Ğ´Ğ½Ğ¾ Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ ÑĞµĞ±Ñ Ğ¸ Ğ½Ğ°Ğ¹Ñ‚Ğ¸ Ğ¸Ğ½Ñ‚ĞµÑ€ĞµÑĞ½Ñ‹Ñ… ÑĞ¾Ğ±ĞµÑĞµĞ´Ğ½Ğ¸ĞºĞ¾Ğ².\n\n"
                    "Ğ¢Ğ²Ğ¾Ñ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ° â€” Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ‚ĞµĞºÑÑ‚ Ğ°Ğ½ĞºĞµÑ‚Ñ‹ Ğ¸ Ğ´Ğ°Ğ²Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ½ÑÑ‚Ñ€ÑƒĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğµ, Ğ´Ñ€ÑƒĞ¶ĞµĞ»ÑĞ±Ğ½Ñ‹Ğµ Ğ¸ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ ÑĞ¾Ğ²ĞµÑ‚Ñ‹, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ ÑĞ´ĞµĞ»Ğ°Ñ‚ÑŒ ĞµÑ‘ Ğ¶Ğ¸Ğ²Ğ¾Ğ¹, Ğ¾Ñ€Ğ¸Ğ³Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾Ğ¹ Ğ¸ Ğ¿Ñ€Ğ¸Ğ²Ğ»ĞµĞºĞ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾Ğ¹.\n\n"
                    "ĞŸÑ€Ğ¸ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğµ ÑƒÑ‡Ğ¸Ñ‚Ñ‹Ğ²Ğ°Ğ¹:\n\n"
                    "Ğ¡Ñ‚Ğ¸Ğ»ÑŒ Ğ¸ Ñ‚Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ â€” Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»Ğ¸, ĞºĞ°ĞºĞ¾Ğ¹ Ğ¾Ğ±Ñ€Ğ°Ğ· ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ Ñ‚ĞµĞºÑÑ‚, Ğ½Ğ°ÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ğ¾Ğ½ Ğ¶Ğ¸Ğ²Ğ¾Ğ¹, Ğ¸ÑĞºÑ€ĞµĞ½Ğ½Ğ¸Ğ¹ Ğ¸ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ´Ğ»Ñ Ğ´ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³Ğ°. "
                    "ĞĞ±Ñ€Ğ°Ñ‚Ğ¸ Ğ²Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ° Ğ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¸Ğ², Ğ´Ñ€ÑƒĞ¶ĞµĞ»ÑĞ±Ğ¸Ğµ, Ğ¾Ñ€Ğ¸Ğ³Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ. ĞŸĞ¾Ğ´ÑĞºĞ°Ğ¶Ğ¸, ĞºĞ°Ğº ÑƒÑĞ¸Ğ»Ğ¸Ñ‚ÑŒ ÑÑ„Ñ„ĞµĞºÑ‚ Ğ¼Ğ¸Ğ½Ğ¸-Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸ÑĞ¼Ğ¸ Ğ¸ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğ¼Ğ¸ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğ°Ğ¼Ğ¸.\n\n"
                    "Ğ¡Ğ¾Ğ¾Ñ‚Ğ½Ğ¾ÑˆĞµĞ½Ğ¸Ğµ Â«Ğ¾ ÑĞµĞ±ĞµÂ» Ğ¸ Â«Ğ¾ Ñ‚Ğ¾Ğ¼, ĞºĞ¾Ğ³Ğ¾ Ğ¸Ñ‰ĞµÑˆÑŒÂ» â€” Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑŒ, Ğ½Ğ°ÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ğ°Ğ½ĞºĞµÑ‚Ğ° Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ¸Ñ€ÑƒĞµÑ‚ Ğ¼ĞµĞ¶Ğ´Ñƒ Ñ€Ğ°ÑÑĞºĞ°Ğ·Ğ¾Ğ¼ Ğ¾ ÑĞµĞ±Ğµ Ğ¸ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸ĞµĞ¼ Ğ¶ĞµĞ»Ğ°ĞµĞ¼Ğ¾Ğ³Ğ¾ Ğ¿Ğ°Ñ€Ñ‚Ğ½Ñ‘Ñ€Ğ°. "
                    "ĞŸÑ€ĞµĞ´Ğ»Ğ¾Ğ¶Ğ¸ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ, ĞµÑĞ»Ğ¸ ĞµÑÑ‚ÑŒ Ğ¿ĞµÑ€ĞµĞºĞ¾Ñ. Ğ ÑĞµĞ±Ğµ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ¾ Ğ±Ñ‹Ñ‚ÑŒ Ğ½Ğ°Ğ¿Ğ¸ÑĞ°Ğ½Ğ¾, Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğ½Ğ¾ 70%, Ğ¾ Ñ‚Ğ¾Ğ¼, ĞºĞ¾Ğ³Ğ¾ Ğ¸Ñ‰ĞµÑˆÑŒ â€” 30%.\n\n"
                    "ĞÑ€Ğ¸Ğ³Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ Ğ¸ Ğ¸Ğ·Ğ±ĞµĞ³Ğ°Ğ½Ğ¸Ğµ ĞºĞ»Ğ¸ÑˆĞµ â€” Ğ½Ğ°Ğ¹Ğ´Ğ¸ Ğ¸ ÑƒĞºĞ°Ğ¶Ğ¸ Ğ±Ğ°Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¸Ğ»Ğ¸ ÑĞ»Ğ¸ÑˆĞºĞ¾Ğ¼ Ñ€Ğ°ÑĞ¿Ñ€Ğ¾ÑÑ‚Ñ€Ğ°Ğ½Ñ‘Ğ½Ğ½Ñ‹Ğµ Ñ„Ñ€Ğ°Ğ·Ñ‹. "
                    "ĞŸÑ€ĞµĞ´Ğ»Ğ¾Ğ¶Ğ¸ Ğ¶Ğ¸Ğ²Ñ‹Ğµ, Ğ½ĞµÑÑ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ½Ñ‹Ğµ Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚Ñ‹ Ñ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğ°Ğ¼Ğ¸.\n\n"
                    "Ğ“Ñ€Ğ°Ğ¼Ğ¼Ğ°Ñ‚Ğ¸ĞºĞ° Ğ¸ Ğ¾Ñ„Ğ¾Ñ€Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ â€” Ğ¾Ñ‚Ğ¼ĞµÑ‚ÑŒ Ğ¸ Ğ¸ÑĞ¿Ñ€Ğ°Ğ²ÑŒ Ğ¾Ğ¿ĞµÑ‡Ğ°Ñ‚ĞºĞ¸, Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸, Ğ¿Ğ¾Ğ´ÑĞºĞ°Ğ¶Ğ¸, ĞºĞ°Ğº ÑĞ´ĞµĞ»Ğ°Ñ‚ÑŒ Ñ‚ĞµĞºÑÑ‚ ÑƒĞ´Ğ¾Ğ±Ğ¾Ñ‡Ğ¸Ñ‚Ğ°ĞµĞ¼Ñ‹Ğ¼ (Ğ°Ğ±Ğ·Ğ°Ñ†Ñ‹, ÑĞ¼Ğ¾Ğ´Ğ·Ğ¸, ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°).\n\n"
                    "ĞŸÑ€Ğ¸Ğ·Ñ‹Ğ²Ñ‹ Ğº Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ Ğ¸ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ñ‹Ğµ Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑÑ‹ â€” Ğ¿Ğ¾Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞ¹ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞ¸Ñ‚ÑŒ Ğ°Ğ½ĞºĞµÑ‚Ñƒ Ğ¿Ñ€Ğ¸Ğ³Ğ»Ğ°ÑˆĞµĞ½Ğ¸ĞµĞ¼ Ğº Ñ€Ğ°Ğ·Ğ³Ğ¾Ğ²Ğ¾Ñ€Ñƒ Ğ¸Ğ»Ğ¸ Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑĞ¾Ğ¼, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ ÑÑ‚Ğ¸Ğ¼ÑƒĞ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¾Ñ‚ĞºĞ»Ğ¸Ğº.\n\n"
                    "ĞŸĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ â€” ĞµÑĞ»Ğ¸ Ğ°Ğ½ĞºĞµÑ‚Ğ° ÑĞ»Ğ¸ÑˆĞºĞ¾Ğ¼ ĞºĞ¾Ñ€Ğ¾Ñ‚ĞºĞ°Ñ Ğ¸Ğ»Ğ¸ Ğ½ĞµĞ¿Ğ¾Ğ½ÑÑ‚Ğ½Ğ°Ñ, Ğ·Ğ°Ğ´Ğ°Ğ¹ ÑƒÑ‚Ğ¾Ñ‡Ğ½ÑÑÑ‰Ğ¸Ğµ Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑÑ‹ (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€, Ğ¾ Ñ…Ğ¾Ğ±Ğ±Ğ¸ Ğ¸Ğ»Ğ¸ Ñ†ĞµĞ»ÑÑ… Ğ·Ğ½Ğ°ĞºĞ¾Ğ¼ÑÑ‚Ğ²Ğ°).\n\n"
                    "Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ Ğ¸ Ğ¿Ñ€Ğ¸Ğ²Ğ°Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ â€” Ğ½Ğ°Ğ¿Ğ¾Ğ¼Ğ½Ğ¸ Ğ¸Ğ·Ğ±ĞµĞ³Ğ°Ñ‚ÑŒ Ğ¸Ğ·Ğ»Ğ¸ÑˆĞ½Ğ¸Ñ… Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ….\n\n"
                    "Ğ’ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğµ:\n"
                    "- ĞšÑ€Ğ°Ñ‚ĞºĞ¾ Ğ¾Ğ¿Ğ¸ÑˆĞ¸ ÑÑ‚Ğ¸Ğ»ÑŒ Ğ°Ğ½ĞºĞµÑ‚Ñ‹ Ğ¸ ĞµÑ‘ ÑĞ¸Ğ»ÑŒĞ½Ñ‹Ğµ ÑÑ‚Ğ¾Ñ€Ğ¾Ğ½Ñ‹.\n"
                    "- ĞÑ‚Ğ¼ĞµÑ‚ÑŒ ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹ Ğ¸ Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶Ğ¸ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğµ ÑƒĞ»ÑƒÑ‡ÑˆĞµĞ½Ğ¸Ñ.\n"
                    "- ĞŸÑ€Ğ¸Ğ²ĞµĞ´Ğ¸ 1â€“2 Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğ° Ğ·Ğ°Ğ¼ĞµĞ½Ñ‹ Ñ„Ñ€Ğ°Ğ· Â«Ğ”Ğ¾ / ĞŸĞ¾ÑĞ»ĞµÂ».\n"
                    "- ĞœĞ¾Ñ‚Ğ¸Ğ²Ğ¸Ñ€ÑƒĞ¹ Ğ¸ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ.\n"
                    "- ĞŸÑ€Ğ¸ Ğ½ĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Ğ·Ğ°Ğ´Ğ°Ğ¹ 1â€“2 ÑƒÑ‚Ğ¾Ñ‡Ğ½ÑÑÑ‰Ğ¸Ñ… Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑĞ° Ğ´Ğ»Ñ ÑƒÑ‚Ğ¾Ñ‡Ğ½ĞµĞ½Ğ¸Ñ.\n\n"
                    "ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°Ğ¹ Ğ´Ñ€ÑƒĞ¶ĞµĞ»ÑĞ±Ğ½Ñ‹Ğ¹, Ğ¶Ğ¸Ğ²Ğ¾Ğ¹ Ğ¸ ÑĞ»ĞµĞ³ĞºĞ° Ğ¸Ñ€Ğ¾Ğ½Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ Ñ‚Ğ¾Ğ½, Ğ¸Ğ·Ğ±ĞµĞ³Ğ°Ğ¹ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚ĞµĞ¹ Ğ¸ Â«Ñ€Ğ¾Ğ±Ğ¾Ñ‚Ğ¸Ñ‡Ğ½Ğ¾ÑÑ‚Ğ¸Â».\n\n"
                    "ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹ Ñ…Ğ¾Ñ€Ğ¾ÑˆĞ¸Ñ… Ğ°Ğ½ĞºĞµÑ‚ (3â€“5 ÑˆÑ‚ÑƒĞº):\n\n"
                    "1. Ğ’Ğ´Ğ¾Ñ…Ğ½Ğ¾Ğ²Ğ»ÑÑÑ‰Ğ°Ñ Ğ°Ğ½ĞºĞµÑ‚Ğ° Ğ´Ğ»Ñ Ğ·Ğ½Ğ°ĞºĞ¾Ğ¼ÑÑ‚Ğ²\n"
                    "Ğ›ÑĞ±Ğ»Ñ Ğ¸ÑÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ½Ğ¾Ğ²Ñ‹Ğµ Ğ³Ğ¾Ñ€Ğ¾Ğ´Ğ° Ğ¸ Ğ´ĞµĞ³ÑƒÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¼ĞµÑÑ‚Ğ½ÑƒÑ ĞºÑƒÑ…Ğ½Ñ, Ğ´Ğ°Ğ¶Ğµ ĞµÑĞ»Ğ¸ Ğ¸Ğ½Ğ¾Ğ³Ğ´Ğ° ÑÑ‚Ğ¾ Ñ€Ğ¸ÑĞºĞ¾Ğ²Ğ¾ Ğ´Ğ»Ñ Ğ¶ĞµĞ»ÑƒĞ´ĞºĞ°. "
                    "Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚Ğ¾Ñ€Ğ¾Ğ¼ â€” ĞºĞ°Ğ¹Ñ„ÑƒÑ, ĞºĞ¾Ğ³Ğ´Ğ° Ğ²Ğ¸Ğ¶Ñƒ, ĞºĞ°Ğº Ğ¿ÑƒÑÑ‚Ñ‹Ğµ Ğ¿Ñ€Ğ¾ÑÑ‚Ñ€Ğ°Ğ½ÑÑ‚Ğ²Ğ° Ğ¿Ñ€ĞµĞ²Ñ€Ğ°Ñ‰Ğ°ÑÑ‚ÑÑ Ğ² ÑƒÑÑ‚Ğ½Ñ‹Ğµ Ğ´Ğ¾Ğ¼Ğ°. "
                    "Ğ’ Ğ±ÑƒĞ´Ğ½Ğ¸ Ğ·Ğ°Ğ½ÑÑ‚ ÑĞ¿Ğ¾Ñ€Ñ‚Ğ¾Ğ¼ Ğ¸ Ñ‡Ñ‚ĞµĞ½Ğ¸ĞµĞ¼, Ğ¿Ğ¾ Ğ²ĞµÑ‡ĞµÑ€Ğ°Ğ¼ ÑĞ¾Ğ±Ğ¸Ñ€Ğ°ÑÑÑŒ Ñ Ğ´Ñ€ÑƒĞ·ÑŒÑĞ¼Ğ¸ Ğ½Ğ° Ğ½Ğ°ÑÑ‚Ğ¾Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¸Ğ³Ñ€Ñ‹. "
                    "Ğ˜Ñ‰Ñƒ ÑĞ¿ÑƒÑ‚Ğ½Ğ¸Ñ†Ñƒ Ğ´Ğ»Ñ ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ½Ñ‹Ñ… Ğ¿ÑƒÑ‚ĞµÑˆĞµÑÑ‚Ğ²Ğ¸Ğ¹ â€” ĞµÑĞ»Ğ¸ Ñ‚Ñ‹ Ğ½Ğµ Ğ±Ğ¾Ğ¸ÑˆÑŒÑÑ Ğ¿Ñ€Ğ¸ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğ¹, Ğ¿Ğ¸ÑˆĞ¸, Ğ¾Ğ±ÑÑƒĞ´Ğ¸Ğ¼ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚!\n\n"
                    "2. ĞĞ½ĞºĞµÑ‚Ğ° Ñ ÑĞ¼Ğ¾Ñ€Ğ¾Ğ¼\n"
                    "Ğ“Ğ¾Ñ€Ğ¶ÑƒÑÑŒ Ñ‚ĞµĞ¼, Ñ‡Ñ‚Ğ¾ ÑƒĞ¼ĞµÑ Ğ¿Ñ€Ğ¸Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ»ÑƒÑ‡ÑˆĞ¸Ğ¹ Ğ¾Ğ¼Ğ»ĞµÑ‚ Ğ² Ñ€Ğ°Ğ´Ğ¸ÑƒÑĞµ 5 ĞºĞ¼. "
                    "ĞŸÑ€Ğ¾Ñ„ĞµÑÑĞ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ñ†ĞµĞ½Ğ¸Ñ‚ĞµĞ»ÑŒ Ğ¼ĞµĞ¼Ğ¾Ğ² Ğ¸ Ğ¼Ğ°ÑÑ‚ĞµÑ€ Ğ¿Ğ¸Ğ½Ğ³-Ğ¿Ğ¾Ğ½Ğ³Ğ°. "
                    "ĞœĞ¾Ñ Ğ³Ğ»Ğ°Ğ²Ğ½Ğ°Ñ Ğ¼ĞµÑ‡Ñ‚Ğ° â€” Ğ½Ğ°ÑƒÑ‡Ğ¸Ñ‚ÑŒÑÑ Ğ¸Ğ³Ñ€Ğ°Ñ‚ÑŒ Ğ½Ğ° ÑƒĞºÑƒĞ»ĞµĞ»Ğµ (Ğ¿Ğ¾ĞºĞ° Ğ¼Ğ¾Ğ³Ñƒ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¸Ğ·Ğ´ĞµĞ²Ğ°Ñ‚ÑŒÑÑ Ğ½Ğ°Ğ´ ÑĞ¾ÑĞµĞ´ÑĞ¼Ğ¸). "
                    "Ğ¥Ğ¾Ñ‡ĞµÑˆÑŒ Ğ²Ğ¼ĞµÑÑ‚Ğµ ÑĞ¼ĞµÑÑ‚ÑŒÑÑ â€” ÑĞºĞ°Ğ¶Ğ¸ ÑĞ²Ğ¾Ğ¹ Ğ»ÑĞ±Ğ¸Ğ¼Ñ‹Ğ¹ Ğ°Ğ½ĞµĞºĞ´Ğ¾Ñ‚!\n\n"
                    "3. Ğ˜Ğ³Ñ€Ğ¸Ğ²Ğ¾-ĞºĞ¾Ñ€Ğ¾Ñ‚ĞºĞ¾Ğµ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ\n"
                    "Ğ’ Ğ¿Ğ¾Ğ¸ÑĞºĞµ: Ğ½Ğ°Ğ¿Ğ°Ñ€Ğ½Ğ¸Ğº Ğ´Ğ»Ñ Ğ·Ğ°Ñ…Ğ²Ğ°Ñ‚Ğ° Ğ¼Ğ¸Ñ€Ğ° Ğ¸ ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ½Ğ¾Ğ³Ğ¾ Ğ¿Ñ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€Ğ° ÑĞµÑ€Ğ¸Ğ°Ğ»Ğ¾Ğ² Ğ¿Ğ¾Ğ´ Ğ³Ğ¾Ñ€ÑÑ‡Ğ¸Ğ¹ Ñ‡Ğ°Ğ¹. "
                    "Ğ•ÑĞ»Ğ¸ ÑÑ‡Ğ¸Ñ‚Ğ°ĞµÑˆÑŒ, Ñ‡Ñ‚Ğ¾ Ğ¿Ğ¸Ñ†Ñ†Ğ° Ñ Ğ°Ğ½Ğ°Ğ½Ğ°ÑĞ°Ğ¼Ğ¸ â€” Ğ½Ğ¾Ñ€Ğ¼, Ğ¼Ñ‹ Ğ¾Ğ±Ñ€ĞµÑ‡ĞµĞ½Ñ‹â€¦ Ğ½Ğ° Ğ²ĞµÑÑ‘Ğ»Ñ‹Ğ¹ ÑĞ¿Ğ¾Ñ€!\n\n"
                    "4. ĞĞ½ĞºĞµÑ‚Ğ° Ñ ĞºĞ¸Ğ½ĞµĞ¼Ğ°Ñ‚Ğ¾Ğ³Ñ€Ğ°Ñ„Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¼ Ğ¾ĞºÑ€Ğ°ÑĞ¾Ğ¼\n"
                    "ĞœĞ¾Ğ¸ Ğ»ÑĞ±Ğ¸Ğ¼Ñ‹Ğµ Ñ„Ğ¸Ğ»ÑŒĞ¼Ñ‹ â€” Â«ĞšÑ€ĞµÑÑ‚Ğ½Ñ‹Ğ¹ Ğ¾Ñ‚ĞµÑ†Â», Â«Ğ“Ğ°Ñ€Ñ€Ğ¸ ĞŸĞ¾Ñ‚Ñ‚ĞµÑ€ Ğ¸ ÑƒĞ·Ğ½Ğ¸Ğº ĞĞ·ĞºĞ°Ğ±Ğ°Ğ½Ğ°Â» Ğ¸ Â«ĞšĞ¾Ğ³Ğ´Ğ° Ğ“Ğ°Ñ€Ñ€Ğ¸ Ğ²ÑÑ‚Ñ€ĞµÑ‚Ğ¸Ğ» Ğ¡Ğ°Ğ»Ğ»Ğ¸Â». "
                    "ĞĞ°Ğ´ĞµÑÑÑŒ, ÑÑ‚Ğ¾Ñ‚ Ğ¼Ğ¸ĞºÑ Ğ¿Ğ¾ĞºĞ°Ğ¶ĞµÑ‚, Ñ‡Ñ‚Ğ¾ Ñ Ñ†ĞµĞ½Ñ Ğ¸ ĞºĞ»Ğ°ÑÑĞ¸ĞºÑƒ, Ğ¸ ÑĞ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ. "
                    "Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ° Ğ¾Ğ±ÑÑƒĞ¶Ğ´Ğ°Ñ‚ÑŒ Ğ»ÑĞ±Ğ¸Ğ¼Ñ‹Ğµ ÑÑ†ĞµĞ½Ñ‹ Ğ·Ğ° Ñ‡Ğ°ÑˆĞºĞ¾Ğ¹ ĞºĞ¾Ñ„Ğµ!\n\n"
                    "5. ĞĞ½ĞºĞµÑ‚Ğ° Ğ´Ğ»Ñ match Ğ¿Ğ¾ Ğ¸Ğ½Ñ‚ĞµÑ€ĞµÑĞ°Ğ¼\n"
                    "Ğ£Ğ²Ğ»ĞµĞºĞ°ÑÑÑŒ Ñ€ĞµĞ¼Ğ¾Ğ½Ñ‚Ğ¾Ğ¼ ÑÑ‚Ğ°Ñ€Ñ‹Ñ… Ğ¼Ğ°ÑˆĞ¸Ğ½, ÑƒÑ‡Ğ°ÑÑ‚Ğ²ÑƒÑ Ğ² BBQ Ñ Ğ´Ñ€ÑƒĞ·ÑŒÑĞ¼Ğ¸, Ğ¾Ğ±Ğ¾Ğ¶Ğ°Ñ Ğ½Ğ¾Ğ²Ñ‹Ğµ Ğ¼ÑƒĞ·Ñ‹ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ³Ñ€ÑƒĞ¿Ğ¿Ñ‹. "
                    "Ğ•ÑĞ»Ğ¸ Ñƒ Ñ‚ĞµĞ±Ñ ĞµÑÑ‚ÑŒ ÑĞ¾Ğ±Ğ°ĞºĞ° â€” Ñ‚Ñ‹ Ğ·Ğ°Ñ€Ğ°Ğ½ĞµĞµ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑˆÑŒ Ğ»Ğ°Ğ¹Ğº. "
                    "Ğ”Ğ°Ğ²Ğ°Ğ¹ Ğ¿Ñ€Ğ¾ĞºĞ°Ñ‚Ğ¸Ğ¼ÑÑ Ğ·Ğ° Ğ³Ğ¾Ñ€Ğ¾Ğ´ Ğ¸ ÑƒÑÑ‚Ñ€Ğ¾Ğ¸Ğ¼ Ğ¿Ğ¸ĞºĞ½Ğ¸Ğº Ğ½Ğ° Ğ´Ğ²Ğ¾Ğ¸Ñ…?"
                )
PHOTO_FEEDBACK_PROMPT_TEMPLATE = (
    "Ğ¢Ñ‹ â€” AI-Ğ¼ĞµĞ½Ñ‚Ğ¾Ñ€ Ğ¿Ğ¾ Ğ´ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³Ñƒ Ğ¸ ÑĞºÑĞ¿ĞµÑ€Ñ‚ Ğ¿Ğ¾ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ñƒ Ñ„Ğ¾Ñ‚Ğ¾ Ğ´Ğ»Ñ Ğ¾Ğ½Ğ»Ğ°Ğ¹Ğ½-Ğ·Ğ½Ğ°ĞºĞ¾Ğ¼ÑÑ‚Ğ². "
    "Ğ¢Ğ²Ğ¾Ñ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ° â€” Ğ¿Ğ¾Ğ¼Ğ¾Ñ‡ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ¿Ğ¾Ğ½ÑÑ‚ÑŒ, Ğ½Ğ°ÑĞºĞ¾Ğ»ÑŒĞºĞ¾ ĞµĞ³Ğ¾ Ñ„Ğ¾Ñ‚Ğ¾ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ´Ğ»Ñ Ñ€Ğ°Ğ·Ğ¼ĞµÑ‰ĞµĞ½Ğ¸Ñ Ğ² Ğ°Ğ½ĞºĞµÑ‚Ğµ, "
    "Ğ¸ Ğ´Ğ°Ñ‚ÑŒ Ğ¼ÑĞ³ĞºÑƒÑ, Ğ´Ñ€ÑƒĞ¶ĞµĞ»ÑĞ±Ğ½ÑƒÑ Ğ¸ Ğ¼Ğ¾Ñ‚Ğ¸Ğ²Ğ¸Ñ€ÑƒÑÑ‰ÑƒÑ Ğ¾Ğ±Ñ€Ğ°Ñ‚Ğ½ÑƒÑ ÑĞ²ÑĞ·ÑŒ Ñ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğ¼Ğ¸ Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸ÑĞ¼Ğ¸.\n\n"
    
    "Ğ¤Ğ¾Ñ‚Ğ¾ Ğ±Ñ‹Ğ»Ğ¾ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ ĞºĞ»Ğ°ÑÑĞ¸Ñ„Ğ¸Ñ†Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾ ĞºĞ°Ğº: \"{photo_class}\" (ÑƒĞ²ĞµÑ€ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ: {confidence:.2f}).\n\n"

    "ĞŸÑ€Ğ¾Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒĞ¹ Ñ„Ğ¾Ñ‚Ğ¾ Ñ Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¸ Ğ´ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³Ğ° Ğ¸ Ğ¾Ğ½Ğ»Ğ°Ğ¹Ğ½-Ğ·Ğ½Ğ°ĞºĞ¾Ğ¼ÑÑ‚Ğ², ÑƒÑ‡Ğ¸Ñ‚Ñ‹Ğ²Ğ°Ñ:\n\n"
    "1. ĞšĞ°ĞºĞ¸Ğµ ÑĞ¸Ğ»ÑŒĞ½Ñ‹Ğµ ÑÑ‚Ğ¾Ñ€Ğ¾Ğ½Ñ‹ Ñƒ ÑÑ‚Ğ¾Ğ³Ğ¾ Ñ„Ğ¾Ñ‚Ğ¾? Ğ§Ñ‚Ğ¾ Ğ¸Ğ¼ĞµĞ½Ğ½Ğ¾ Ğ² Ğ½Ñ‘Ğ¼ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ğ½Ğ° ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ñ…Ğ¾Ñ€Ğ¾ÑˆĞµĞ³Ğ¾ Ğ¿ĞµÑ€Ğ²Ğ¾Ğ³Ğ¾ Ğ²Ğ¿ĞµÑ‡Ğ°Ñ‚Ğ»ĞµĞ½Ğ¸Ñ? "
    "ĞĞ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€: Ñ…Ğ¾Ñ€Ğ¾ÑˆĞµĞµ Ğ¾ÑĞ²ĞµÑ‰ĞµĞ½Ğ¸Ğµ, Ğ¸ÑĞºÑ€ĞµĞ½Ğ½ÑÑ ÑƒĞ»Ñ‹Ğ±ĞºĞ°, Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´ÑÑ‰Ğ¸Ğ¹ Ñ„Ğ¾Ğ½, ĞµÑÑ‚ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğµ ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¸, ÑĞ¾Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğ¹ ÑÑ‚Ğ¸Ğ»ÑŒ.\n\n"
    "2. ĞšĞ°ĞºĞ¸Ğµ Ğ¼Ğ¾Ğ¼ĞµĞ½Ñ‚Ñ‹ Ğ¸Ğ»Ğ¸ Ğ´ĞµÑ‚Ğ°Ğ»Ğ¸ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ ÑƒĞ»ÑƒÑ‡ÑˆĞ¸Ñ‚ÑŒ? ĞĞ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€: Ñ„Ğ¾Ğ½, ÑĞ²ĞµÑ‚, Ğ¿Ğ¾Ğ·Ğ°, Ğ²Ñ‹Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ Ğ»Ğ¸Ñ†Ğ°, ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾ ÑĞ½Ğ¸Ğ¼ĞºĞ°, "
    "Ğ¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ğ²Ğ¸Ğµ Ğ»Ğ¸ÑˆĞ½Ğ¸Ñ… Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚Ğ¾Ğ² Ğ¸Ğ»Ğ¸ Ğ»ÑĞ´ĞµĞ¹, ÑƒĞ¼ĞµĞ½ÑŒÑˆĞµĞ½Ğ¸Ğµ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ¾Ğ² Ğ¸Ğ»Ğ¸ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ¾Ğº.\n\n"
    "3. ĞšĞ°ĞºĞ¸Ğµ ÑĞ¾Ğ²ĞµÑ‚Ñ‹ Ñ‚Ñ‹ Ğ±Ñ‹ Ğ´Ğ°Ğ», Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ñ„Ğ¾Ñ‚Ğ¾ Ğ²Ñ‹Ğ³Ğ»ÑĞ´ĞµĞ»Ğ¾ Ğ±Ğ¾Ğ»ĞµĞµ Ğ¿Ñ€Ğ¸Ğ²Ğ»ĞµĞºĞ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ Ğ¸ Ğ¿Ğ¾Ğ¼Ğ¾Ğ³Ğ°Ğ»Ğ¾ Ğ¿Ñ€Ğ¸Ğ²Ğ»ĞµÑ‡ÑŒ Ğ²Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ğµ Ğ½ÑƒĞ¶Ğ½Ğ¾Ğ¹ Ğ°ÑƒĞ´Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¸?\n\n"
    "4. Ğ¡Ñ‚Ğ¾Ğ¸Ñ‚ Ğ»Ğ¸ ÑÑ‚Ğ¾ Ñ„Ğ¾Ñ‚Ğ¾ Ñ€Ğ°Ğ·Ğ¼ĞµÑ‰Ğ°Ñ‚ÑŒ Ğ² Ğ°Ğ½ĞºĞµÑ‚Ğµ? Ğ•ÑĞ»Ğ¸ Ğ½ĞµÑ‚, Ğ¾Ğ±ÑŠÑÑĞ½Ğ¸ Ğ´ĞµĞ»Ğ¸ĞºĞ°Ñ‚Ğ½Ğ¾ Ğ¿Ğ¾Ñ‡ĞµĞ¼Ñƒ, Ğ¸ Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶Ğ¸, Ñ‡Ñ‚Ğ¾ Ğ»ÑƒÑ‡ÑˆĞµ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ Ğ²Ğ¼ĞµÑÑ‚Ğ¾ Ğ½ĞµĞ³Ğ¾ "
    "(Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€, Ñ„Ğ¾Ñ‚Ğ¾ Ğ½Ğ° ÑĞ²ĞµĞ¶ĞµĞ¼ Ğ²Ğ¾Ğ·Ğ´ÑƒÑ…Ğµ, Ñ ÑƒĞ»Ñ‹Ğ±ĞºĞ¾Ğ¹, Ñ Ñ…Ğ¾Ğ±Ğ±Ğ¸).\n\n"

    "Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹ Ğ´Ñ€ÑƒĞ¶ĞµĞ»ÑĞ±Ğ½Ñ‹Ğ¹, Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ÑÑ‰Ğ¸Ğ¹ Ğ¸ Ğ¸ÑĞºÑ€ĞµĞ½Ğ½Ğ¸Ğ¹ Ñ‚Ğ¾Ğ½, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ½Ğµ Ñ‡ÑƒĞ²ÑÑ‚Ğ²Ğ¾Ğ²Ğ°Ğ» ĞºÑ€Ğ¸Ñ‚Ğ¸ĞºÑƒ, Ğ° Ğ¿Ğ¾Ğ½ÑĞ», ĞºĞ°Ğº ÑĞ´ĞµĞ»Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ Ğ»ÑƒÑ‡ÑˆĞµ. "
    "ĞĞµ Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ¸ ÑÑƒÑ…Ğ¾ Ğ¸Ğ»Ğ¸ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾ â€” Ğ±ÑƒĞ´ÑŒ ĞºĞ°Ğº Ñ…Ğ¾Ñ€Ğ¾ÑˆĞ¸Ğ¹ Ğ¼ĞµĞ½Ñ‚Ğ¾Ñ€, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹ Ñ…Ğ¾Ñ‡ĞµÑ‚ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‡ÑŒ.\n\n"

    "---\n\n"
    "### ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ° Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ°:\n\n"
    "- ĞŸĞ»ÑÑÑ‹:\n"
    "  ĞĞ¿Ğ¸ÑˆĞ¸ ÑĞ¸Ğ»ÑŒĞ½Ñ‹Ğµ ÑÑ‚Ğ¾Ñ€Ğ¾Ğ½Ñ‹ Ñ„Ğ¾Ñ‚Ğ¾, Ñ‡Ñ‚Ğ¾ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ğ½Ğ° ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¿Ñ€Ğ¸ÑÑ‚Ğ½Ğ¾Ğ³Ğ¾ Ğ¾Ğ±Ñ€Ğ°Ğ·Ğ°.\n\n"
    "- ĞœĞ¸Ğ½ÑƒÑÑ‹:\n"
    "  ĞœÑĞ³ĞºĞ¾ ÑƒĞºĞ°Ğ¶Ğ¸, Ñ‡Ñ‚Ğ¾ ÑÑ‚Ğ¾Ğ¸Ñ‚ ÑƒĞ»ÑƒÑ‡ÑˆĞ¸Ñ‚ÑŒ, Ğ¸Ğ·Ğ±ĞµĞ³Ğ°Ñ Ñ€ĞµĞ·ĞºĞ¸Ñ… Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ¸Ñ€Ğ¾Ğ²Ğ¾Ğº.\n\n"
    "- Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¸:\n"
    "  !!!ĞšĞĞĞšĞ Ğ•Ğ¢ĞĞ«Ğ•!!! ÑĞ¾Ğ²ĞµÑ‚Ñ‹ Ğ¿Ğ¾ ÑƒĞ»ÑƒÑ‡ÑˆĞµĞ½Ğ¸Ñ Ñ„Ğ¾Ñ‚Ğ¾ Ğ¸Ğ»Ğ¸ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ñƒ Ğ´Ñ€ÑƒĞ³Ğ¾Ğ³Ğ¾ ÑĞ½Ğ¸Ğ¼ĞºĞ°.\n\n"
    "- Ğ˜Ñ‚Ğ¾Ğ³:\n"
    "  Ğ¡Ñ‚Ğ¾Ğ¸Ñ‚ Ğ»Ğ¸ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑÑ‚ÑŒ ÑÑ‚Ğ¾ Ñ„Ğ¾Ñ‚Ğ¾ Ğ² Ğ°Ğ½ĞºĞµÑ‚Ñƒ Ğ¸ Ğ¿Ğ¾Ñ‡ĞµĞ¼Ñƒ."
)
CONVERSATION_ANALYSIS_PROMPT = (
        "Ğ¢Ñ‹ â€” AI-Ğ¼ĞµĞ½Ñ‚Ğ¾Ñ€ Ğ¿Ğ¾ Ğ´ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³Ñƒ Ğ¸ ÑĞºÑĞ¿ĞµÑ€Ñ‚ Ğ² Ğ²ĞµĞ´ĞµĞ½Ğ¸Ğ¸ Ğ¿ĞµÑ€ĞµĞ¿Ğ¸ÑĞ¾Ğº, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹ Ğ¿Ğ¾Ğ¼Ğ¾Ğ³Ğ°ĞµÑ‚ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑĞ¼ Ğ¼Ğ°ĞºÑĞ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾ ÑÑ„Ñ„ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ Ğ¸ Ğ¸ÑĞºÑ€ĞµĞ½Ğ½Ğµ "
        "Ğ²Ñ‹ÑÑ‚Ñ€Ğ°Ğ¸Ğ²Ğ°Ñ‚ÑŒ Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³ Ñ Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¼ Ğ¿Ğ°Ñ€Ñ‚Ğ½Ñ‘Ñ€Ğ¾Ğ¼, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¿Ñ€ĞµĞ²Ñ€Ğ°Ñ‚Ğ¸Ñ‚ÑŒ Ğ¿ĞµÑ€ĞµĞ¿Ğ¸ÑĞºÑƒ Ğ² Ñ€ĞµĞ°Ğ»ÑŒĞ½ÑƒÑ Ğ²ÑÑ‚Ñ€ĞµÑ‡Ñƒ.\n\n"
        "Ğ¢Ğ²Ğ¾Ñ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ° â€” Ğ¿Ñ€Ğ¾Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿ĞµÑ€ĞµĞ¿Ğ¸ÑĞºÑƒ, Ğ¿Ñ€ĞµĞ´ÑÑ‚Ğ°Ğ²Ğ»ĞµĞ½Ğ½ÑƒÑ {Ğ² Ğ²Ğ¸Ğ´Ğµ ÑĞºÑ€Ğ¸Ğ½ÑˆĞ¾Ñ‚Ğ° Ğ¸Ğ»Ğ¸ Ñ‚ĞµĞºÑÑ‚Ğ°}, Ğ¸ Ğ´Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğµ, Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ "
        "Ğ¸ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸Ñ‡Ğ½Ñ‹Ğµ Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¸ Ğ¿Ğ¾ Ğ¿Ñ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½Ğ¸Ñ Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³Ğ°.\n\n"
        "ĞŸÑ€Ğ¸ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğµ Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ ÑƒÑ‡Ñ‚Ğ¸ ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğµ Ğ¼Ğ¾Ğ¼ĞµĞ½Ñ‚Ñ‹:\n"
        "1. ĞŸÑ€Ğ¾Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒĞ¹ ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ ÑĞ¾Ğ±ĞµÑĞµĞ´Ğ½Ğ¸ĞºĞ°: Ğ½Ğ°ÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ğ¾Ğ½ Ğ²Ğ¾Ğ²Ğ»ĞµÑ‡Ñ‘Ğ½, Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚, Ğ·Ğ°Ğ¸Ğ½Ñ‚ĞµÑ€ĞµÑĞ¾Ğ²Ğ°Ğ½ Ğ¸Ğ»Ğ¸, Ğ½Ğ°Ğ¾Ğ±Ğ¾Ñ€Ğ¾Ñ‚, Ñ…Ğ¾Ğ»Ğ¾Ğ´ĞµĞ½ Ğ¸ Ğ¾Ñ‚ÑÑ‚Ñ€Ğ°Ğ½Ñ‘Ğ½. "
        "ĞŸĞ¾Ğ´ÑÑ‚Ñ€Ğ¾Ğ¹ ÑĞ¾Ğ²ĞµÑ‚Ñ‹ Ñ‚Ğ°Ğº, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¾Ğ½Ğ¸ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´Ğ¸Ğ»Ğ¸ Ğº Ñ‚ĞµĞºÑƒÑ‰ĞµĞ¹ Ğ´Ğ¸Ğ½Ğ°Ğ¼Ğ¸ĞºĞµ Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ.\n"
        "2. ĞĞ¿Ñ€ĞµĞ´ĞµĞ»Ğ¸ Ğ¿Ñ€Ğ¸Ğ·Ğ½Ğ°ĞºĞ¸ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾Ğ¹ Ğ½ĞµĞ·Ğ°Ğ¸Ğ½Ñ‚ĞµÑ€ĞµÑĞ¾Ğ²Ğ°Ğ½Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ¸Ğ»Ğ¸ Â«ĞºÑ€Ğ°ÑĞ½Ñ‹Ğµ Ñ„Ğ»Ğ°Ğ³Ğ¸Â» (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€, ĞºÑ€Ğ°Ñ‚ĞºĞ¸Ğµ Ğ¾Ñ‚Ğ²ĞµÑ‚Ñ‹, Ğ·Ğ°Ğ´ĞµÑ€Ğ¶ĞºĞ¸, Ğ¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ğ²Ğ¸Ğµ Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑĞ¾Ğ², "
        "Ğ¾Ñ‚ÑÑ‚Ñ€Ğ°Ğ½Ñ‘Ğ½Ğ½Ğ¾ÑÑ‚ÑŒ). Ğ•ÑĞ»Ğ¸ Ñ‚Ğ°ĞºĞ¸Ğµ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ñ‹ ĞµÑÑ‚ÑŒ, Ğ¿Ñ€ĞµĞ´ÑƒĞ¿Ñ€ĞµĞ´Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ¸ Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶Ğ¸ Ñ‚Ğ°ĞºÑ‚Ğ¸ĞºĞ¸ Ğ½Ğµ Ğ½Ğ°Ğ²ÑĞ·Ñ‹Ğ²Ğ°Ñ‚ÑŒÑÑ Ğ¸ Ğ°ĞºĞºÑƒÑ€Ğ°Ñ‚Ğ½Ğ¾ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°Ñ‚ÑŒ "
        "ĞºĞ¾Ğ¼Ñ„Ğ¾Ñ€Ñ‚Ğ½Ñ‹Ğ¹ Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³.\n"
        "3. ĞÑ†ĞµĞ½Ğ¸ Ñ‚Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ Ğ¸ ÑÑ‚Ğ¸Ğ»ÑŒ Ğ¿ĞµÑ€ĞµĞ¿Ğ¸ÑĞºĞ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ: ÑĞ»Ğ¸ÑˆĞºĞ¾Ğ¼ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹, ÑÑƒÑ…Ğ¾Ğ¹, Ğ½Ğ°Ğ²ÑĞ·Ñ‡Ğ¸Ğ²Ñ‹Ğ¹, Ğ¿Ğ°ÑÑĞ¸Ğ²Ğ½Ñ‹Ğ¹ Ğ¸Ğ»Ğ¸ Ğ¶Ğ¸Ğ²Ğ¾Ğ¹ Ğ¸ Ğ¸Ğ½Ñ‚ĞµÑ€ĞµÑĞ½Ñ‹Ğ¹.\n"
        "4. Ğ’Ñ‹Ğ´ĞµĞ»Ğ¸ ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ñ‚ĞµĞ¼Ñ‹ Ğ¸ Ğ¼Ğ¾Ğ¼ĞµĞ½Ñ‚Ñ‹ Ğ¿ĞµÑ€ĞµĞ¿Ğ¸ÑĞºĞ¸, Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶Ğ¸, ĞºĞ°Ğº Ğ¸Ñ… Ñ€Ğ°Ğ·Ğ²Ğ¸Ñ‚ÑŒ Ğ¸Ğ»Ğ¸ Ğ¿Ğ»Ğ°Ğ²Ğ½Ğ¾ ÑĞ¼ĞµĞ½Ğ¸Ñ‚ÑŒ, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ ÑĞ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ğ¸ ÑƒÑĞ¸Ğ»Ğ¸Ñ‚ÑŒ Ğ¸Ğ½Ñ‚ĞµÑ€ĞµÑ.\n"
        "5. Ğ”Ğ°Ğ¹ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ñ‹ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ (3-5 Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚Ğ¾Ğ²) Ğ´Ğ»Ñ Ğ¾Ğ¶Ğ¸Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³Ğ° â€” Ñ Ñ€Ğ°Ğ·Ğ½Ñ‹Ğ¼Ğ¸ ÑÑ‚Ğ¸Ğ»ÑĞ¼Ğ¸: Ğ¸Ğ³Ñ€Ğ¸Ğ²Ñ‹Ğµ, Ğ»Ñ‘Ğ³ĞºĞ¸Ğµ Ñ„Ğ»Ğ¸Ñ€Ñ‚ÑƒÑÑ‰Ğ¸Ğµ, "
        "ÑĞµÑ€ÑŒÑ‘Ğ·Ğ½Ñ‹Ğµ, Ğ¸ÑĞºÑ€ĞµĞ½Ğ½Ğ¸Ğµ.\n"
        "6. ĞŸĞ¾Ğ´ÑĞºĞ°Ğ¶Ğ¸, ĞºĞ°Ğº Ğ¸ ĞºĞ¾Ğ³Ğ´Ğ° Ğ½ĞµĞ½Ğ°Ğ²ÑĞ·Ñ‡Ğ¸Ğ²Ğ¾ Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶Ğ¸Ñ‚ÑŒ Ğ¿ĞµÑ€ĞµĞ¹Ñ‚Ğ¸ Ğº Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ¹ Ğ²ÑÑ‚Ñ€ĞµÑ‡Ğµ Ğ¸Ğ»Ğ¸ Ğ±Ğ¾Ğ»ĞµĞµ Ğ±Ğ»Ğ¸Ğ·ĞºĞ¾Ğ¼Ñƒ Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ, ÑƒÑ‡Ğ¸Ñ‚Ñ‹Ğ²Ğ°Ñ ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ ÑĞ¾Ğ±ĞµÑĞµĞ´Ğ½Ğ¸ĞºĞ°.\n"
        "7. Ğ’ĞºĞ»ÑÑ‡Ğ¸ Ğ¿ÑĞ¸Ñ…Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¸: ĞºĞ°Ğº ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ°Ñ‚Ğ¼Ğ¾ÑÑ„ĞµÑ€Ñƒ Ğ´Ğ¾Ğ²ĞµÑ€Ğ¸Ñ Ğ¸ ĞºĞ¾Ğ¼Ñ„Ğ¾Ñ€Ñ‚Ğ° Ğ² Ğ¿ĞµÑ€ĞµĞ¿Ğ¸ÑĞºĞµ, ĞºĞ°Ğº Ğ¸Ğ·Ğ±ĞµĞ³Ğ°Ñ‚ÑŒ Ğ´Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ¸ Ğ½Ğµ Ğ²Ñ‹Ğ·Ğ²Ğ°Ñ‚ÑŒ Ğ½ĞµĞ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ñ.\n\n"
        "---\n\n"
        "Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ°:\n"
        "- ĞšÑ€Ğ°Ñ‚ĞºĞ¸Ğ¹ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ· Ñ‚ĞµĞºÑƒÑ‰ĞµĞ¹ Ğ¿ĞµÑ€ĞµĞ¿Ğ¸ÑĞºĞ¸ (Ğ²Ğ¾Ğ²Ğ»ĞµÑ‡Ñ‘Ğ½Ğ½Ğ¾ÑÑ‚ÑŒ ÑĞ¾Ğ±ĞµÑĞµĞ´Ğ½Ğ¸ĞºĞ°, Ñ‚Ğ¾Ğ½, Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ, ÑĞ¸Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¸ ÑĞ»Ğ°Ğ±Ñ‹Ğµ ÑÑ‚Ğ¾Ñ€Ğ¾Ğ½Ñ‹).\n"
        "- ĞĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Â«ĞºÑ€Ğ°ÑĞ½Ñ‹Ñ… Ñ„Ğ»Ğ°Ğ³Ğ¾Ğ²Â» Ğ¸Ğ»Ğ¸ Ğ¿Ñ€Ğ¸Ğ·Ğ½Ğ°ĞºĞ¾Ğ² ÑĞ½Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ Ğ¸Ğ½Ñ‚ĞµÑ€ĞµÑĞ° (ĞµÑĞ»Ğ¸ ĞµÑÑ‚ÑŒ).\n"
        "- Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¸ Ğ¿Ğ¾ ÑÑ‚Ğ¸Ğ»Ñ Ğ¸ ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ°Ğ½Ğ¸Ñ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ.\n"
        "- ĞšĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ñ‹ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½Ğ¸Ñ Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³Ğ°.\n"
        "- Ğ¡Ğ¾Ğ²ĞµÑ‚Ñ‹ Ğ¿Ğ¾ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ñƒ Ğº Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ Ğ²ÑÑ‚Ñ€ĞµÑ‡Ğ¸.\n"
        "- ĞĞ±Ñ‰Ğ¸Ğµ Ğ¿ÑĞ¸Ñ…Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¸ Ğ´Ğ»Ñ ĞºĞ¾Ğ¼Ñ„Ğ¾Ñ€Ñ‚Ğ½Ğ¾Ğ³Ğ¾ Ğ¸ ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾Ğ³Ğ¾ Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ.\n\n"
        "---\n\n"
        "Ğ¢Ğ¾Ğ½ Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ:\n"
        "Ğ”Ñ€ÑƒĞ¶ĞµĞ»ÑĞ±Ğ½Ñ‹Ğ¹, Ğ»Ñ‘Ğ³ĞºĞ¸Ğ¹, Ğ¼Ğ¾Ñ‚Ğ¸Ğ²Ğ¸Ñ€ÑƒÑÑ‰Ğ¸Ğ¹, Ğ¸ÑĞºÑ€ĞµĞ½Ğ½Ğ¸Ğ¹, Ğ½ĞµĞ¼Ğ½Ğ¾Ğ³Ğ¾ Ğ¸Ğ³Ñ€Ğ¸Ğ²Ñ‹Ğ¹. Ğ‘ĞµĞ· Ğ½Ğ°Ğ²ÑĞ·Ñ‡Ğ¸Ğ²Ğ¾ÑÑ‚Ğ¸ Ğ¸ Ğ¸Ğ·Ğ»Ğ¸ÑˆĞ½ĞµĞ¹ ÑĞµÑ€ÑŒÑ‘Ğ·Ğ½Ğ¾ÑÑ‚Ğ¸. ĞĞµ Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ¸ ĞºĞ°Ğº Ñ€Ğ¾Ğ±Ğ¾Ñ‚, Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹ Ğ¶Ğ¸Ğ²Ñ‹Ğµ Ğ²Ñ‹Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ.\n"
    )
FIRST_MESSAGE_PROMPT = (
        "Ğ¢Ñ‹ â€” AI-Ğ¼ĞµĞ½Ñ‚Ğ¾Ñ€ Ğ¿Ğ¾ Ğ´ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³Ñƒ, ÑĞºÑĞ¿ĞµÑ€Ñ‚ Ğ² ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğ¸ ÑÑ€ĞºĞ¸Ñ…, Ğ¾Ñ€Ğ¸Ğ³Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… Ğ¸ ÑÑ„Ñ„ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ñ… Ğ¿ĞµÑ€Ğ²Ñ‹Ñ… ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğµ Ğ¿Ğ¾Ğ¼Ğ¾Ğ³Ğ°ÑÑ‚ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾ Ğ½Ğ°Ñ‡Ğ°Ñ‚ÑŒ Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³ Ñ Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¼ Ğ¿Ğ°Ñ€Ñ‚Ğ½Ñ‘Ñ€Ğ¾Ğ¼.\n\n"
        "Ğ¢Ğ²Ğ¾Ñ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ° â€” Ğ½Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ğµ Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶ĞµĞ½Ğ½Ğ¾Ğ³Ğ¾ ÑĞºÑ€Ğ¸Ğ½Ğ° Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»Ñ Ğ¸ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ date-Ğ¿Ğ°Ñ€Ñ‚Ğ½Ñ‘Ñ€Ğ°:\n"
        "1. ĞŸÑ€Ğ¾Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ¸Ğ½Ñ‚ĞµÑ€ĞµÑÑ‹, Ñ…Ğ¾Ğ±Ğ±Ğ¸, ÑÑ‚Ğ¸Ğ»ÑŒ Ğ¸ Ñ‚Ğ¾Ğ½ Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»Ñ.\n"
        "2. ĞŸÑ€ĞµĞ´Ğ»Ğ¾Ğ¶Ğ¸Ñ‚ÑŒ 3â€“5 ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ñ…, Ğ¶Ğ¸Ğ²Ñ‹Ñ… Ğ¸ Ñ†ĞµĞ¿Ğ»ÑÑÑ‰Ğ¸Ñ… Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚Ğ¾Ğ² Ğ¿ĞµÑ€Ğ²Ñ‹Ñ… ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹, Ğ°Ğ´Ğ°Ğ¿Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¿Ğ¾Ğ´ ÑÑ‚Ğ¾Ğ³Ğ¾ ÑĞ¾Ğ±ĞµÑĞµĞ´Ğ½Ğ¸ĞºĞ°. Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚Ñ‹ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹ Ğ±Ñ‹Ñ‚ÑŒ Ñ€Ğ°Ğ·Ğ½Ñ‹Ğ¼Ğ¸ Ğ¿Ğ¾ ÑÑ‚Ğ¸Ğ»Ñ: Ğ¸Ğ³Ñ€Ğ¸Ğ²Ñ‹Ğµ, ÑĞµÑ€ÑŒÑ‘Ğ·Ğ½Ñ‹Ğµ, Ñ‚Ğ²Ğ¾Ñ€Ñ‡ĞµÑĞºĞ¸Ğµ, ÑĞ¼ĞµÑˆĞ½Ñ‹Ğµ.\n"
        "3. ĞĞ±ÑŠÑÑĞ½Ğ¸Ñ‚ÑŒ, Ğ¿Ğ¾Ñ‡ĞµĞ¼Ñƒ Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»Ñ‘Ğ½Ğ½Ñ‹Ğµ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ğ½Ñ‹Ğµ Ğ¸Ğ»Ğ¸ Ğ¿Ğ»Ğ¾Ñ…Ğ¸Ğµ Ğ¿ĞµÑ€Ğ²Ñ‹Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ğ½Ğµ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ÑÑ‚, Ğ¿Ñ€Ğ¸Ğ²ĞµĞ´Ñ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€ Ñ‚Ğ°ĞºĞ¾Ğ³Ğ¾ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ñ Ğ¾Ğ±ÑŠÑÑĞ½ĞµĞ½Ğ¸ĞµĞ¼.\n"
        "4. Ğ”Ğ°Ñ‚ÑŒ Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¸ Ğ¿Ğ¾ Ğ»ÑƒÑ‡ÑˆĞµĞ¼Ñƒ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸ Ğ¸ Ñ‡Ğ°ÑÑ‚Ğ¾Ñ‚Ğµ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ¸ Ğ¿ĞµÑ€Ğ²Ñ‹Ñ… ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¿Ğ¾Ğ²Ñ‹ÑĞ¸Ñ‚ÑŒ ÑˆĞ°Ğ½ÑÑ‹ Ğ½Ğ° Ğ¾Ñ‚Ğ²ĞµÑ‚ Ğ¸ Ğ·Ğ°Ğ¸Ğ½Ñ‚ĞµÑ€ĞµÑĞ¾Ğ²Ğ°Ğ½Ğ½Ğ¾ÑÑ‚ÑŒ.\n\n"
        "---\n\n"
        "Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ°:\n"
        "- ĞšÑ€Ğ°Ñ‚ĞºĞ¸Ğ¹ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ· Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»Ñ: ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ¸Ğ½Ñ‚ĞµÑ€ĞµÑÑ‹ Ğ¸ Ñ‚Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ.\n"
        "- 3â€“5 Ğ¸Ğ´ĞµĞ¹ Ğ´Ğ»Ñ Ğ¿ĞµÑ€Ğ²Ğ¾Ğ³Ğ¾ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ.\n"
        "- ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ğ¿Ğ»Ğ¾Ñ…Ğ¾Ğ³Ğ¾ Ğ¿ĞµÑ€Ğ²Ğ¾Ğ³Ğ¾ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ğ¸ Ğ¾Ğ±ÑŠÑÑĞ½ĞµĞ½Ğ¸Ğµ, Ğ¿Ğ¾Ñ‡ĞµĞ¼Ñƒ ĞµĞ³Ğ¾ Ğ»ÑƒÑ‡ÑˆĞµ Ğ¸Ğ·Ğ±ĞµĞ³Ğ°Ñ‚ÑŒ.\n"
        "- Ğ¡Ğ¾Ğ²ĞµÑ‚Ñ‹ Ğ¿Ğ¾ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸ Ğ¸ Ñ‡Ğ°ÑÑ‚Ğ¾Ñ‚Ğµ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ¸ Ğ¿ĞµÑ€Ğ²Ğ¾Ğ³Ğ¾ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ.\n"
        "- ĞĞ±Ñ‰Ğ¸Ğµ Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¸ Ğ¸ Ğ¼Ğ¾Ñ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ Ğ´Ğ»Ñ ÑƒĞ²ĞµÑ€ĞµĞ½Ğ½Ğ¾Ğ³Ğ¾ ÑÑ‚Ğ°Ñ€Ñ‚Ğ° Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³Ğ°.\n\n"
        "---\n\n"
        "Ğ¢Ğ¾Ğ½ Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ: Ğ´Ñ€ÑƒĞ¶ĞµĞ»ÑĞ±Ğ½Ñ‹Ğ¹, ÑĞ½ĞµÑ€Ğ³Ğ¸Ñ‡Ğ½Ñ‹Ğ¹, Ğ¸ÑĞºÑ€ĞµĞ½Ğ½Ğ¸Ğ¹, Ğ¼Ğ¾Ñ‚Ğ¸Ğ²Ğ¸Ñ€ÑƒÑÑ‰Ğ¸Ğ¹, Ğ±ĞµĞ· Ğ¸Ğ·Ğ»Ğ¸ÑˆĞ½ĞµĞ¹ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸ Ğ¸ Ğ±Ğ°Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚ĞµĞ¹.\n\n"
        "---\n\n"
        "ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ°:\n\n"
        "Â«Ğ’ Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»Ğµ Ğ²Ğ¸Ğ´Ğ½Ğ¾, Ñ‡Ñ‚Ğ¾ ÑĞ¾Ğ±ĞµÑĞµĞ´Ğ½Ğ¸Ğº Ğ»ÑĞ±Ğ¸Ñ‚ Ğ¿ÑƒÑ‚ĞµÑˆĞµÑÑ‚Ğ²Ğ¸Ñ Ğ¸ ÑĞ¼Ğ¾Ñ€, Ğ° Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ½Ğ°ÑÑ‹Ñ‰ĞµĞ½Ğ¾ ÑÑ€ĞºĞ¸Ğ¼Ğ¸ ÑĞ¼Ğ¾Ñ†Ğ¸ÑĞ¼Ğ¸. Ğ­Ñ‚Ğ¾ Ğ¾Ñ‚Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ²Ğ¾Ğ´ Ğ½Ğ°Ñ‡Ğ°Ñ‚ÑŒ Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³ Ğ¶Ğ¸Ğ²Ğ¾ Ğ¸ Ñ Ğ¸Ğ½Ñ‚ĞµÑ€ĞµÑĞ¾Ğ¼.\n\n"
        "Ğ’Ğ¾Ñ‚ Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ğ¸Ğ´ĞµĞ¹ Ğ¿ĞµÑ€Ğ²Ğ¾Ğ³Ğ¾ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ:\n"
        "1) \"Ğ•ÑĞ»Ğ¸ Ğ±Ñ‹ ÑĞµĞ¹Ñ‡Ğ°Ñ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ±Ñ‹Ğ»Ğ¾ Ñ‚ĞµĞ»ĞµĞ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒÑÑ Ğ² Ğ»ÑĞ±Ğ¾Ğµ Ğ¼ĞµÑÑ‚Ğ¾, ĞºÑƒĞ´Ğ° Ğ¼Ñ‹ Ğ±Ñ‹ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ¸ÑÑŒ?\"\n"
        "2) \"Ğ¢Ğ²Ğ¾Ğ¹ Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ Ñ‚Ğ°ĞºĞ¾Ğ¹ ÑĞ½ĞµÑ€Ğ³Ğ¸Ñ‡Ğ½Ñ‹Ğ¹! ĞšĞ°ĞºĞ¾Ğ¹ ÑĞ°Ğ¼Ñ‹Ğ¹ ÑĞ¼ĞµÑˆĞ½Ğ¾Ğ¹ ÑĞ»ÑƒÑ‡Ğ°Ğ¹ Ğ¿Ñ€Ğ¸ĞºĞ»ÑÑ‡Ğ¸Ğ»ÑÑ Ğ² Ñ‚Ğ²Ğ¾Ğ¸Ñ… Ğ¿ÑƒÑ‚ĞµÑˆĞµÑÑ‚Ğ²Ğ¸ÑÑ…?\"\n"
        "3) \"Ğ£Ğ²Ğ¸Ğ´ĞµĞ», Ñ‡Ñ‚Ğ¾ Ñ‚Ñ‹ Ñ„Ğ°Ğ½Ğ°Ñ‚ Ğ¼ÑƒĞ·Ñ‹ĞºĞ¸ â€” ĞºĞ°ĞºĞ¾Ğ¹ Ñ‚Ñ€ĞµĞº Ğ»ÑƒÑ‡ÑˆĞµ Ğ²ÑĞµĞ³Ğ¾ Ğ¾Ğ¿Ğ¸ÑÑ‹Ğ²Ğ°ĞµÑ‚ Ñ‚Ğ²Ğ¾Ñ‘ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ¸Ğµ ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ?\"\n\n"
        "ĞŸĞ»Ğ¾Ñ…Ğ¾Ğ¹ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€ Ğ¿ĞµÑ€Ğ²Ğ¾Ğ³Ğ¾ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ:\n"
        "Â«ĞŸÑ€Ğ¸Ğ²ĞµÑ‚, ĞºĞ°Ğº Ğ´ĞµĞ»Ğ°?Â» â€” ÑĞ»Ğ¸ÑˆĞºĞ¾Ğ¼ Ğ±Ğ°Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾, Ğ½Ğµ Ğ²Ñ‹Ğ´ĞµĞ»ÑĞµÑ‚ÑÑ, Ğ½Ğµ Ğ´Ğ°Ñ‘Ñ‚ ÑĞ¾Ğ±ĞµÑĞµĞ´Ğ½Ğ¸ĞºÑƒ Ğ¿Ğ¾Ğ²Ğ¾Ğ´ Ğ´Ğ»Ñ Ğ¸Ğ½Ñ‚ĞµÑ€ĞµÑĞ½Ğ¾Ğ³Ğ¾ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ° Ğ¸ Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾ Ñ‚ĞµÑ€ÑĞµÑ‚ÑÑ ÑÑ€ĞµĞ´Ğ¸ Ğ¼Ğ½Ğ¾Ğ¶ĞµÑÑ‚Ğ²Ğ° Ğ¿Ğ¾Ğ´Ğ¾Ğ±Ğ½Ñ‹Ñ… ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹.\n\n"
        "Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¸ Ğ¿Ğ¾ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸ Ğ¸ Ñ‡Ğ°ÑÑ‚Ğ¾Ñ‚Ğµ:\n"
        "Ğ›ÑƒÑ‡ÑˆĞµ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑÑ‚ÑŒ Ğ¿ĞµÑ€Ğ²Ğ¾Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ² Ğ²ĞµÑ‡ĞµÑ€Ğ½Ğ¸Ğµ Ñ‡Ğ°ÑÑ‹ â€” ĞºĞ¾Ğ³Ğ´Ğ° Ñ‡ĞµĞ»Ğ¾Ğ²ĞµĞº Ñ€Ğ°ÑÑĞ»Ğ°Ğ±Ğ»ĞµĞ½ Ğ¸ Ñ‡Ğ°Ñ‰Ğµ ÑĞ¼Ğ¾Ñ‚Ñ€Ğ¸Ñ‚ Ğ² Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½. ĞĞµ ÑÑ‚Ğ¾Ğ¸Ñ‚ ÑĞ»Ğ°Ñ‚ÑŒ Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ Ğ¿Ğ¾Ğ´Ñ€ÑĞ´ â€” ÑÑ‚Ğ¾ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ²Ñ‹Ğ³Ğ»ÑĞ´ĞµÑ‚ÑŒ Ğ½Ğ°Ğ²ÑĞ·Ñ‡Ğ¸Ğ²Ğ¾ Ğ¸ Ğ¾Ñ‚Ğ¿ÑƒĞ³Ğ½ÑƒÑ‚ÑŒ. Ğ”Ğ°Ğ¹ Ğ²Ñ€ĞµĞ¼Ñ Ğ½Ğ° Ğ¾Ñ‚Ğ²ĞµÑ‚, Ğ¾Ğ±Ñ‹Ñ‡Ğ½Ğ¾ Ğ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ 24â€“48 Ñ‡Ğ°ÑĞ¾Ğ².\n\n"
        "Ğ£Ğ²ĞµÑ€ĞµĞ½Ğ½Ğ¾ Ğ½Ğ°Ñ‡Ğ¸Ğ½Ğ°Ğ¹ Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³ â€” Ğ¸ÑĞºÑ€ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ Ğ¸ Ğ²Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ğµ Ğº Ğ´ĞµÑ‚Ğ°Ğ»ÑĞ¼ Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»Ñ Ğ²ÑĞµĞ³Ğ´Ğ° Ñ†ĞµĞ½ÑÑ‚ÑÑ!Â»"
    )

CLIP_LABELS = [
    {"text": "ĞÑ‚Ğ»Ğ¸Ñ‡Ğ½Ğ¾Ğµ Ğ´ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³-Ñ„Ğ¾Ñ‚Ğ¾ (ÑÑ€ĞºĞ¾Ğµ, Ñ ÑƒĞ»Ñ‹Ğ±ĞºĞ¾Ğ¹, ÑĞ²ĞµÑ‚Ğ¾Ğ¼ Ğ¸ Ğ²Ğ°Ñƒ-ÑÑ„Ñ„ĞµĞºÑ‚Ğ¾Ğ¼)", "priority": 0},
    {"text": "Ğ¥Ğ¾Ñ€Ğ¾ÑˆĞµĞµ Ñ„Ğ¾Ñ‚Ğ¾ (Ğ½Ğ¾Ñ€Ğ¼, Ğ½Ğ¾ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ ÑƒĞ»ÑƒÑ‡ÑˆĞ¸Ñ‚ÑŒ Ñ„Ğ¾Ğ½, Ğ¿Ğ¾Ğ·Ñƒ Ğ¸Ğ»Ğ¸ Ğ¾ÑĞ²ĞµÑ‰ĞµĞ½Ğ¸Ğµ)", "priority": 1},
    {"text": "Ğ¤Ğ¾Ñ‚Ğ¾ Ñ Ñ…Ğ¾Ğ±Ğ±Ğ¸ (Ğ¼ÑƒĞ·Ñ‹ĞºĞ°, ÑĞ¿Ğ¾Ñ€Ñ‚, Ñ‚Ğ²Ğ¾Ñ€Ñ‡ĞµÑÑ‚Ğ²Ğ¾ â€” Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ ĞºÑ€ÑƒÑ‚Ğ¾)", "priority": 2},
    {"text": "Ğ¤Ğ¾Ñ‚Ğ¾ Ğ² ÑĞºÑÑ‚Ñ€Ğ¸Ğ¼Ğµ (ÑĞ¿Ğ¾Ñ€Ñ‚, ÑĞºÑˆĞ½ â€” Ğ²Ğ°Ñƒ, Ğ½Ğ¾ Ğ»Ğ¸Ñ†Ğ¾ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ¾ Ğ±Ñ‹Ñ‚ÑŒ Ğ²Ğ¸Ğ´Ğ½Ğ¾)", "priority": 3},
    {"text": "ĞĞµĞ¹Ñ‚Ñ€Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ñ„Ğ¾Ñ‚Ğ¾ (Ğ½Ğµ Ğ²Ñ‹Ğ´ĞµĞ»ÑĞµÑ‚ÑÑ, Ğ½Ğµ Ñ†ĞµĞ¿Ğ»ÑĞµÑ‚, Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾ Ğ½Ğ¾Ñ€Ğ¼)", "priority": 4},
    {"text": "Ğ¡ĞµĞ»Ñ„Ğ¸ Ğ² Ğ·ĞµÑ€ĞºĞ°Ğ»Ğµ (Ñ‡Ğ°ÑÑ‚Ğ¾ Ğ±Ğ°Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾, Ğ»ÑƒÑ‡ÑˆĞµ Ğ·Ğ°Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ½Ğ° Ğ¶Ğ¸Ğ²Ğ¾Ğµ Ñ„Ğ¾Ñ‚Ğ¾)", "priority": 5},
    {"text": "Ğ“Ñ€ÑƒĞ¿Ğ¿Ğ¾Ğ²Ğ¾Ğµ Ñ„Ğ¾Ñ‚Ğ¾ (Ğ½ĞµĞ¿Ğ¾Ğ½ÑÑ‚Ğ½Ğ¾, ĞºÑ‚Ğ¾ Ñ‚Ñ‹, Ğ¾Ñ‚Ğ²Ğ»ĞµĞºĞ°ĞµÑ‚ Ğ²Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ğµ)", "priority": 6},
    {"text": "Ğ¤Ğ¾Ñ‚Ğ¾ Ğ±ĞµĞ· Ğ»Ğ¸Ñ†Ğ° (Ğ»Ğ¸Ñ†Ğ¾ Ğ½Ğµ Ğ²Ğ¸Ğ´Ğ½Ğ¾ â€” Ğ² ÑˆĞ°Ğ¿ĞºĞµ, Ğ¾Ñ‡ĞºĞ°Ñ…, ÑĞ±Ğ¾ĞºÑƒ)", "priority": 7},
    {"text": "ĞĞµĞµÑÑ‚ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ğ°Ñ Ğ¿Ğ¾Ğ·Ğ° Ğ¸Ğ»Ğ¸ Ğ¼Ğ¸Ğ¼Ğ¸ĞºĞ° (Ğ½Ğ°Ğ¸Ğ³Ñ€Ğ°Ğ½Ğ½Ğ¾, Ğ¿ĞµÑ€ĞµĞ¸Ğ³Ñ€Ñ‹Ğ²Ğ°ĞµÑˆÑŒ)", "priority": 8},
    {"text": "Ğ¡Ğ¸Ğ»ÑŒĞ½Ğ¾ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ½Ğ½Ğ¾Ğµ Ñ„Ğ¾Ñ‚Ğ¾ (Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ñ‹, Ñ€ĞµÑ‚ÑƒÑˆÑŒ, Ğ½ĞµĞµÑÑ‚ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ğ¾)", "priority": 9},
    {"text": "ĞŸĞ»Ğ¾Ñ…Ğ¾Ğµ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾ (Ñ€Ğ°Ğ·Ğ¼Ñ‹Ñ‚Ğ¸Ğµ, Ğ¿Ğ¸ĞºÑĞµĞ»Ğ¸, ÑĞ¸Ğ»ÑŒĞ½Ğ°Ñ ĞºĞ¾Ğ¼Ğ¿Ñ€ĞµÑÑĞ¸Ñ)", "priority": 10},
    {"text": "Ğ¤Ğ¾Ñ‚Ğ¾ Ñ Ğ¿Ğ»Ğ¾Ñ…Ğ¸Ğ¼ Ñ„Ğ¾Ğ½Ğ¾Ğ¼ (Ğ¼ÑƒÑĞ¾Ñ€, Ñ‚Ğ¾Ğ»Ğ¿Ğ°, Ğ¾Ñ‚Ğ²Ğ»ĞµĞºĞ°ÑÑ‰Ğ¸Ğµ Ğ´ĞµÑ‚Ğ°Ğ»Ğ¸)", "priority": 11},
    {"text": "Ğ¤Ğ¾Ñ‚Ğ¾ Ñ Ğ¿Ğ»Ğ¾Ñ…Ğ¸Ğ¼ Ğ¾ÑĞ²ĞµÑ‰ĞµĞ½Ğ¸ĞµĞ¼ (Ñ‚ĞµĞ¼Ğ½Ğ¾Ñ‚Ğ°, Ğ¿ĞµÑ€ĞµÑĞ²ĞµÑ‚, Ñ‚ĞµĞ½Ğ¸ Ğ½Ğ° Ğ»Ğ¸Ñ†Ğµ)", "priority": 12},
    {"text": "Ğ¡ĞºÑƒÑ‡Ğ½Ğ¾Ğµ/Ğ½ĞµÑƒĞ¼ĞµÑÑ‚Ğ½Ğ¾Ğµ (ĞµĞ´Ğ°, Ğ¿ĞµĞ¹Ğ·Ğ°Ğ¶, Ğ¶Ğ¸Ğ²Ğ¾Ñ‚Ğ½Ñ‹Ğµ Ğ±ĞµĞ· Ñ‚ĞµĞ±Ñ)", "priority": 13},
    {"text": "Ğ¤Ğ¾Ñ‚Ğ¾ Ñ red flags (Ğ°Ğ³Ñ€ĞµÑÑĞ¸Ñ, Ğ°Ğ»ĞºĞ¾Ğ³Ğ¾Ğ»ÑŒ, ÑĞ¸Ğ³Ğ°Ñ€ĞµÑ‚Ñ‹, Ğ½ĞµĞ³Ğ°Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ Ğ²Ğ°Ğ¹Ğ±)", "priority": 14}
]

# === Ğ£Ğ¢Ğ˜Ğ›Ğ˜Ğ¢Ğ« ===

def encode_image_base64(image_path, include_mime=True):
    with open(image_path, "rb") as f:
        b64 = base64.b64encode(f.read()).decode("utf-8")
        if include_mime:
            mime = "image/jpeg" if image_path.lower().endswith(".jpg") else "image/png"
            return f"data:{mime};base64,{b64}"
        return b64

def extract_scores(text):
    try:
        json_text = re.search(r"\{.*?\}", text, re.DOTALL).group(0)
        scores = json.loads(json_text)
        rest = text.replace(json_text, "").strip()
        return scores, rest
    except Exception:
        return {}, text

def highlight_best_worst_phrases(text):
    return {
        "best": re.findall(r"\*\*(.*?)\*\*", text),
        "worst": re.findall(r"\_\_(.*?)\_\_", text)
    }

# === ĞĞĞĞ›Ğ˜Ğ— Ğ¡ĞšĞ Ğ˜ĞĞ ĞĞĞšĞ•Ğ¢Ğ« ===

def analyze_profile_image(image_path):
    base64_image = encode_image_base64(image_path)
    response = client.chat.completions.create(
        model="gpt-4o",
        messages=[
            {"role": "system", "content": PROFILE_ANALYSIS_PROMPT},
            {
                "role": "user",
                "content": [
                    {"type": "text", "text": "Ğ’Ğ¾Ñ‚ Ğ°Ğ½ĞºĞµÑ‚Ğ°. ĞŸÑ€Ğ¾Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒĞ¹ Ğ¸ Ğ´Ğ°Ğ¹ ÑĞ¾Ğ²ĞµÑ‚Ñ‹."},
                    {"type": "image_url", "image_url": {"url": base64_image}}
                ]
            }
        ],
        temperature=0.7
    )
    full_text = response.choices[0].message.content
    scores, review_text = extract_scores(full_text)
    return {"scores": scores, "text": review_text}

# === ĞĞĞĞ›Ğ˜Ğ— Ğ¤ĞĞ¢Ğ ĞŸĞ CLIP ===

def classify_image_clip(image_path):
    image = Image.open(image_path).convert("RGB")
    texts = [lbl["text"] for lbl in CLIP_LABELS]
    inputs = clip_processor(text=texts, images=image, return_tensors="pt", padding=True)

    with torch.no_grad():
        outputs = clip_model(**inputs)
        probs = outputs.logits_per_image.softmax(dim=1)
        idx = probs.argmax(dim=1).item()

    label = CLIP_LABELS[idx]
    return label["text"], label["priority"], probs[0][idx].item()

def explain_photo_via_gpt(photo_class, confidence):
    prompt = PHOTO_FEEDBACK_PROMPT_TEMPLATE.format(photo_class=photo_class, confidence=confidence)
    response = client.chat.completions.create(
        model="gpt-4o",
        messages=[{"role": "user", "content": prompt}],
        temperature=0.7
    )
    return response.choices[0].message.content

def analyze_multiple_photos(photo_paths):
    results = []
    for path in photo_paths[:6]:
        photo_class, priority, conf = classify_image_clip(path)
        feedback = explain_photo_via_gpt(photo_class, conf)
        results.append({
            "image_path": path,
            "photo_class": photo_class,
            "class_rank": priority,
            "confidence": conf,
            "feedback": feedback
        })
    sorted_photos = sorted(results, key=lambda x: (x["class_rank"], -x["confidence"]))
    for i, res in enumerate(sorted_photos):
        res["recommended_position"] = i + 1
    return sorted_photos

# === ĞĞĞĞ›Ğ˜Ğ— ĞŸĞ•Ğ Ğ•ĞŸĞ˜Ğ¡ĞšĞ˜ ===

def analyze_conversation_image(image_path):
    b64 = encode_image_base64(image_path)
    prompt = CONVERSATION_ANALYSIS_PROMPT

    response = client.chat.completions.create(
        model="gpt-4o",
        messages=[{
            "role": "user",
            "content": [
                {"type": "text", "text": prompt},
                {"type": "image_url", "image_url": {"url": b64}}
            ]
        }],
        temperature=0.7
    )
    analysis = response.choices[0].message.content.strip()
    return {
        "analysis": analysis,
        "highlights": highlight_best_worst_phrases(analysis)
    }

# === Ğ“Ğ•ĞĞ•Ğ ĞĞ¦Ğ˜Ğ¯ ĞŸĞ•Ğ Ğ’ĞĞ“Ğ Ğ¡ĞĞĞ‘Ğ©Ğ•ĞĞ˜Ğ¯ ===

def suggest_first_messages_from_profile(image_path):
    b64 = encode_image_base64(image_path)
    prompt = FIRST_MESSAGE_PROMPT

    response = client.chat.completions.create(
        model="gpt-4o",
        messages=[
            {
                "role": "user",
                "content": [
                    {"type": "text", "text": prompt},
                    {"type": "image_url", "image_url": {"url": b64}}
                ]
            }
        ],
        temperature=0.7
    )
    return response.choices[0].message.content.strip()


def print_photo_analysis_results(results) -> str:
    output = ""
    for item in results:
        filename = os.path.basename(item["image_path"])
        output += f"ğŸ“¸ **Ğ¤Ğ¾Ñ‚Ğ¾:** {filename}\n"
        output += f"ğŸ“Œ **Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ°Ñ Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ñ:** {item['recommended_position']}\n"
        output += f"ğŸ§  **ĞšĞ»Ğ°ÑÑ:** {item['photo_class']} \n"
        output += f"ğŸ’¬ **Ğ¤Ğ¸Ğ´Ğ±ĞµĞº:**\n{item['feedback']}\n"
        output += "---\n"
    return output